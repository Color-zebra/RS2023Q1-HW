В JS синтаксические структуры, в частности, функция или блок кода, при выполнении создают собственное лексическое окружение, Lexical Environment, которое состоит из Environment Record и ссылки на внешнее лексическое окружение.

[Спецификация ECMAScript: Lexical Environment](https://262.ecma-international.org/5.1/#sec-10.2)


При объявлении переменной, будь то var, let или const, происходит запись в Environment Record, того лексического окружения, в котором эта переменная объявляется.

Таким образом области видимости переменных могут быть 
* глобальной (при объявлении вне функций и блоков, сразу в скрипте)
* функциональной (при объявлении в теле функции)
* блочной (при объявлении внутри блока кода, ограниченного фигурными скобками)

У переменных, объявленных с помощью var нет блочной области видимости. Это связанно с механизмом всплытия. При запуске кода, интерпретатор первым делом находит объявления функций и объявления переменных и, **в отличии от let и const, переменная объявленная с помощью var, сразу же инициализируется значением undefined** и запишется в текущий Lexical Environment (не доходя до блока и создания блочного Lexical Environment). Переменные же, объявленные с помощью let и const инициализируются в том месте кода, где они объявлены, и если их объявление было выполнено в блоке, то запишутся в Lexical Environment созданный блоком.

[Спецификация ECMAScript: Var](https://tc39.es/ecma262/multipage/ecmascript-language-statements-and-declarations.html#sec-variable-statement)


На примере ниже видно, как переменная, объявленная с помощью var, "всплывает" из блока где она объявлена, вверх.

```js
function getValue(condition) {
  if (condition) {
    var value = "blue";
    // прочий код
    return value;
  } else {
    // переменная value существует здесь и имеет значение undefined
    return null;
  }
  // переменная value существует здесь и имеет значение undefined
}
```
Можно предположить, что переменная _value_ создается, только если условие _condition_ имеет значение _true_. В действительности, она будет создана
в любом случае. За кулисами интерпретатор JavaScript изменит функцию _getValue_, вот так:


```js
function getValue(condition) {
  var value;
  if (condition) {
    value = "blue";
    // прочий код
    return value;
  } else {
    return null;
  }
}
```

[ECMAScript 6 для разработчиков. Николас Закас. (стр. 24)](http://kodaktor.ru:9876/es6.pdf)

